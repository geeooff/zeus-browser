!function(e,t){t.fn.removeClassPrefix=function(e){return this.each(function(t,a){var r=a.className.split(" ").map(function(t){return 0===t.indexOf(e)?"":t});a.className=r.join(" ")}),this},t(e).ready(function(){function a(){o.length>0&&t.ajax({"dataType":"html","url":"?fullcarthtml","success":function(e,t,a){o.html(e)},"error":function(e,t,a){console.error("".concat("Impossible de récupérer le fragment HTML complet du panier (",t,", ",a,")"))}}),s.length>0&&t.ajax({"dataType":"html","url":"?lightcarthtml","success":function(e,t,a){s.html(e)},"error":function(e,t,a){console.error("".concat("Impossible de récupérer le fragment HTML léger du panier (",t,", ",a,")"))}})}var r=t(this),n=t(".cart"),o=n.filter(".cart-full"),s=n.filter(".cart-light");t("[data-toggle='tooltip']").tooltip({"container":"body"}),r.on("click","a.btn.emptycart",function(e){var r=t(this);if(r.addClass("active").prop("disabled",!0),!confirm("Etes-vous sûr de vouloir vider votre panier ?"))return!1;t.ajax({"dataType":"json","url":r.attr("href"),"success":function(e,t,r){a()},"error":function(e,t,a){window.alert("".concat("Impossible de vider le panier (",t,", ",a,")."))},"complete":function(e,t){r.removeClass("active").prop("disabled",!1)}}),e.preventDefault()}),r.on("click","a.btn.addtocart",function(e){var r=t(this);r.addClass("active").prop("disabled",!0),t.ajax({"dataType":"json","url":r.attr("href"),"success":function(e,t,n){2==e&&window.alert("Cet élement est déjà dans le panier."),0!=e&&r.removeClass("addtocart btn-outline-success").addClass("removefromcart btn-outline-danger").attr("href","?removefromcart").find("span").text("Retirer"),a()},"error":function(e,t,a){window.alert("".concat("Impossible d'ajouter l'élément au panier (",t,", ",a,")."))},"complete":function(e,t){r.removeClass("active").prop("disabled",!1)}}),e.preventDefault()}),r.on("click","a.btn.removefromcart",function(e){var r=t(this);r.addClass("active").prop("disabled",!0),t.ajax({"dataType":"json","url":r.attr("href"),"success":function(e,t,n){-1==e.success?window.alert("Cet élement fait partie d'un dossier parent déjà ajouté au panier. Il ne peut être retiré individuellement."):r.removeClass("removefromcart btn-outline-danger").addClass("addtocart btn-outline-success").attr("href","?addtocart").find("span").text("Ajouter"),a()},"error":function(e,t,a){window.alert("".concat("Impossible d'ajouter l'élément au panier (",t,", ",a,")."))},"complete":function(e,t){r.removeClass("active").prop("disabled",!1)}}),e.preventDefault()}),t(".mediainfo").each(function(e){var a=t(this),r=a.is("pre")?"text":"html";t.ajax({"dataType":r,"url":"?mediainfo&format="+r,"success":function(e,t,n){a.removeClass("text-danger"),"html"===r?a.html(e):a.text(e)},"error":function(e,t,r){var n=e.responseText||t;window.alert("".concat("Impossible de récupérer les infos du média (",n,").")),a.text(n).addClass("text-danger")}})}),r.on("change","select.ratio",function(e){var a=t(this),r=t(".embed-responsive"),n="embed-responsive-".concat(a.val());r.removeClassPrefix("embed-responsive-").addClass(n)}),r.on("change","select.ssl",function(e){var a=t(this),r=t("#player"),n=a.val();r.is("video")?(t('source[type^="video"]',r).attr("src",n),r.each(function(e){this.load()})):r.is("audio")&&(t('source[type^="audio"]',r).attr("src",n),r.each(function(e){this.load()}))}),r.on("keydown",function(a){if(a.target==e.body&&!0===a.ctrlKey){var r=t([]);switch(a.key){case"ArrowUp":r=t("#btn-parent");break;case"ArrowLeft":r=t("#btn-prev");break;case"ArrowRight":r=t("#btn-next")}if(r.length){var n=r.attr("href");n&&(e.location.href=n)}}}),t("#dir").DataTable({"info":!1,"paging":!1,"searching":!1,"processing":!1,"ordering":!0,"stateSave":!0,"stateDuration":0,"autoWidth":!1,"stripeClasses":[],"orderClasses":!1,"columnDefs":[{"name":"icon","targets":"col-icon","orderable":!0,"searchable":!1},{"name":"name","targets":"col-name","orderable":!0,"searchable":!0},{"name":"size","targets":"col-size","orderable":!0,"searchable":!1},{"name":"date","targets":"col-date","orderable":!0,"searchable":!1},{"name":"actions","targets":"col-actions","orderable":!1,"searchable":!1}],"order":[[1,"asc"]]})})}(document,jQuery);
//# sourceMappingURL=main.min.js.map
