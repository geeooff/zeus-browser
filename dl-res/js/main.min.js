!function(e,a){a.fn.removeClassPrefix=function(e){return this.each(function(a,t){var r=t.className.split(" ").map(function(a){return 0===a.indexOf(e)?"":a});t.className=r.join(" ")}),this},a(e).ready(function(){function e(){r.length>0&&a.ajax({"dataType":"html","url":"?fullcarthtml","success":function(e,a,t){r.html(e)},"error":function(e,a,t){console.error("".concat("Impossible de récupérer le fragment HTML complet du panier (",a,", ",t,")"))}}),n.length>0&&a.ajax({"dataType":"html","url":"?lightcarthtml","success":function(e,a,t){n.html(e)},"error":function(e,a,t){console.error("".concat("Impossible de récupérer le fragment HTML léger du panier (",a,", ",t,")"))}})}var t=a(".cart"),r=t.filter(".cart-full"),n=t.filter(".cart-light");a("[data-toggle='tooltip']").tooltip(),a("a.btn.emptycart").on("click",function(t){var r=a(this);return r.addClass("active").prop("disabled",!0),!!confirm("Etes-vous sûr de vouloir vider votre panier ?")&&(a.ajax({"dataType":"json","url":r.attr("href"),"success":function(a,t,r){e()},"error":function(e,a,t){window.alert("".concat("Impossible de vider le panier (",a,", ",t,")."))},"complete":function(e,a){r.removeClass("active").prop("disabled",!1)}}),void t.preventDefault())}),a("a.btn.addtocart").on("click",function(t){var r=a(this);r.addClass("active").prop("disabled",!0),a.ajax({"dataType":"json","url":r.attr("href"),"success":function(t,n,o){2==t&&window.alert("Cet élement est déjà dans le panier."),a("i.fa",r).removeClass("fa-shopping-cart").addClass("fa-check"),e()},"error":function(e,a,t){window.alert("".concat("Impossible d'ajouter l'élément au panier (",a,", ",t,")."))},"complete":function(e,a){r.removeClass("active").prop("disabled",!1)}}),t.preventDefault()}),a("a.btn.removefromcart").on("click",function(t){var r=a(this);r.addClass("active").prop("disabled",!0),a.ajax({"dataType":"json","url":r.attr("href"),"success":function(t,n,o){t==-1&&window.alert("Cet élement fait partie d'un dossier parent déjà ajouté au panier. Il ne peut être retiré individuellement."),a("i.fa",r).removeClass("fa-shopping-cart").addClass("fa-check"),e()},"error":function(e,a,t){window.alert("".concat("Impossible d'ajouter l'élément au panier (",a,", ",t,")."))},"complete":function(e,a){r.removeClass("active").prop("disabled",!1)}}),t.preventDefault()}),a(".mediainfo").each(function(e){var t=a(this),r=t.is("pre")?"text":"html";a.ajax({"dataType":r,"url":"?mediainfo&format="+r,"success":function(e,a,n){t.removeClass("text-danger"),"html"===r?t.html(e):t.text(e)},"error":function(e,a,r){var n=e.responseText||a;window.alert("".concat("Impossible de récupérer les infos du média (",n,").")),t.text(n).addClass("text-danger")}})}),a("select.ratio").on("change",function(e){var t=a(this),r=a(".embed-responsive"),n="embed-responsive-".concat(t.val());r.removeClassPrefix("embed-responsive-").addClass(n)}),a("select.ssl").on("change",function(e){var t=a(this),r=a("#player"),n=t.val();r.is("video")?(a('source[type^="video"]',r).attr("src",n),r.each(function(e){this.load()})):r.is("audio")&&(a('source[type^="audio"]',r).attr("src",n),r.each(function(e){this.load()}))}),a("#dir").DataTable({"info":!1,"paging":!1,"searching":!1,"processing":!1,"stateSave":!0,"stateDuration":0,"columnDefs":[{"targets":[0,2,3],"searchable":!1},{"targets":[4],"orderable":!1,"searchable":!1}],"order":[[1,"asc"]]})})}(document,jQuery);
//# sourceMappingURL=main.min.js.map
