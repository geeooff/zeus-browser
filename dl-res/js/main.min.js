!function(e,t){t.fn.removeClassPrefix=function(e){return this.each(function(t,a){var r=a.className.split(" ").map(function(t){return 0===t.indexOf(e)?"":t});a.className=r.join(" ")}),this},t(e).ready(function(){function e(){r.length>0&&t.ajax({"dataType":"html","url":"?fullcarthtml","success":function(e,t,a){r.html(e)},"error":function(e,t,a){console.error("".concat("Impossible de récupérer le fragment HTML complet du panier (",t,", ",a,")"))}}),n.length>0&&t.ajax({"dataType":"html","url":"?lightcarthtml","success":function(e,t,a){n.html(e)},"error":function(e,t,a){console.error("".concat("Impossible de récupérer le fragment HTML léger du panier (",t,", ",a,")"))}})}var a=t(".cart"),r=a.filter(".cart-full"),n=a.filter(".cart-light");t("[data-toggle='tooltip']").tooltip(),t(this).on("click","a.btn.emptycart",function(a){var r=t(this);return r.addClass("active").prop("disabled",!0),!!confirm("Etes-vous sûr de vouloir vider votre panier ?")&&(t.ajax({"dataType":"json","url":r.attr("href"),"success":function(t,a,r){e()},"error":function(e,t,a){window.alert("".concat("Impossible de vider le panier (",t,", ",a,")."))},"complete":function(e,t){r.removeClass("active").prop("disabled",!1)}}),void a.preventDefault())}),t(this).on("click","a.btn.addtocart",function(a){var r=t(this);r.addClass("active").prop("disabled",!0),t.ajax({"dataType":"json","url":r.attr("href"),"success":function(t,a,n){2==t&&window.alert("Cet élement est déjà dans le panier."),0!=t&&r.removeClass("addtocart btn-outline-success").addClass("removefromcart btn-outline-danger").attr("href","?removefromcart").find("span").text("Retirer"),e()},"error":function(e,t,a){window.alert("".concat("Impossible d'ajouter l'élément au panier (",t,", ",a,")."))},"complete":function(e,t){r.removeClass("active").prop("disabled",!1)}}),a.preventDefault()}),t(this).on("click","a.btn.removefromcart",function(a){var r=t(this);r.addClass("active").prop("disabled",!0),t.ajax({"dataType":"json","url":r.attr("href"),"success":function(t,a,n){t==-1?window.alert("Cet élement fait partie d'un dossier parent déjà ajouté au panier. Il ne peut être retiré individuellement."):r.removeClass("removefromcart btn-outline-danger").addClass("addtocart btn-outline-success").attr("href","?addtocart").find("span").text("Ajouter"),e()},"error":function(e,t,a){window.alert("".concat("Impossible d'ajouter l'élément au panier (",t,", ",a,")."))},"complete":function(e,t){r.removeClass("active").prop("disabled",!1)}}),a.preventDefault()}),t(".mediainfo").each(function(e){var a=t(this),r=a.is("pre")?"text":"html";t.ajax({"dataType":r,"url":"?mediainfo&format="+r,"success":function(e,t,n){a.removeClass("text-danger"),"html"===r?a.html(e):a.text(e)},"error":function(e,t,r){var n=e.responseText||t;window.alert("".concat("Impossible de récupérer les infos du média (",n,").")),a.text(n).addClass("text-danger")}})}),t(this).on("change","select.ratio",function(e){var a=t(this),r=t(".embed-responsive"),n="embed-responsive-".concat(a.val());r.removeClassPrefix("embed-responsive-").addClass(n)}),t(this).on("change","select.ssl",function(e){var a=t(this),r=t("#player"),n=a.val();r.is("video")?(t('source[type^="video"]',r).attr("src",n),r.each(function(e){this.load()})):r.is("audio")&&(t('source[type^="audio"]',r).attr("src",n),r.each(function(e){this.load()}))}),t("#dir").DataTable({"info":!1,"paging":!1,"searching":!1,"processing":!1,"ordering":!0,"stateSave":!0,"stateDuration":0,"autoWidth":!1})})}(document,jQuery);
//# sourceMappingURL=main.min.js.map
